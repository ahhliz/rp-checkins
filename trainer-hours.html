<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trainer Hours Submission</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    body { margin:0; font-family:'Inter',sans-serif; background:#1e1e1e; color:#dfd8ce; padding:2rem; }
    .container { max-width:800px; margin:auto; background:#1e1e1e; padding:2rem; border-radius:24px; box-shadow:0 10px 30px rgba(0,0,0,0.5); }
    h1,h2 { text-align:center; margin-bottom:1.5rem; }
    .table-wrapper { overflow-x:auto; -webkit-overflow-scrolling:touch; }
    table { width:100%; border-collapse:collapse; margin-bottom:1rem; }
    th,td { padding:.75rem; border:1px solid #dfd8ce; text-align:left; }
    select,input[type="text"],input[type="date"],input[type="number"] {
      width:100%; padding:.5rem; border-radius:8px; border:none; box-sizing:border-box;
      background:#2a2a2a; color:#dfd8ce;
    }
    button {
      padding:.75rem 1.5rem; font-size:1rem; font-weight:600; border:none; border-radius:10px;
      background:#dfd8ce; color:#1e1e1e; cursor:pointer; margin:1rem .5rem;
    }
    button:hover { background:#e5ded2; box-shadow:0 0 10px rgba(223,216,206,0.4); transition:background .3s, box-shadow .3s; }
    .delete-btn { color:#ff6961; font-weight:bold; font-size:1.2rem; cursor:pointer; text-align:center; }
    #totalHours { font-weight:600; margin-top:1rem; }
    #loadingModal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; z-index:1000; }
    .modal-content { background:#1e1e1e; padding:2rem; border-radius:16px; box-shadow:0 4px 20px rgba(0,0,0,0.7); text-align:center; }
    .spinner { width:40px; height:40px; border:4px solid #dfd8ce; border-top:4px solid transparent; border-radius:50%; animation:spin 1s linear infinite; margin:0 auto 1rem; }
    @keyframes spin { from{transform:rotate(0deg);} to{transform:rotate(360deg);} }
    .hidden { display:none; }
  </style>
</head>
<body>

<!-- Trainer selection -->
<div class="container" id="trainerSelect" style="max-width:400px;">
  <h1>Select Your Name</h1>
  <select id="trainerName" disabled style="margin-bottom:1rem; font-size:1rem; padding:.75rem;">
    <option value="">-- Select Trainer --</option>
  </select>
  <div style="text-align:center;">
    <button id="continueBtn" disabled style="font-size:1.25rem;" onclick="showSubmissionType()">
      Continue
    </button>
  </div>
</div>

<!-- Submission Type Selection -->
<div class="container hidden" id="submissionType">
  <h1>What are you submitting today?</h1>
  <div style="text-align:center;">
    <button onclick="startSubmission('hours')">Only Weekly Hours</button>
    <button onclick="startSubmission('cxl')">Only Cancellations</button>
    <button onclick="startSubmission('both')">Both</button>
  </div>
</div>

<script>
  let selectedTrainer = '';
  let submissionMode = '';

  function showSubmissionType() {
    const name = document.getElementById('trainerName').value;
    if (!name) return alert('Please select your name.');
    selectedTrainer = name;
    document.getElementById('trainerSelect').classList.add('hidden');
    document.getElementById('submissionType').classList.remove('hidden');
  }

  function startSubmission(mode) {
    submissionMode = mode;
    document.getElementById('submissionType').classList.add('hidden');

    if (mode === 'hours') {
      document.getElementById('hourForm').classList.remove('hidden');
    } else if (mode === 'cxl') {
      loadClients().then(() => {
        document.querySelectorAll('.clientDropdown').forEach(sel => populateClientDropdown(sel));
        document.getElementById('cancellationPage').classList.remove('hidden');
      });
    } else if (mode === 'both') {
      document.getElementById('hourForm').classList.remove('hidden');
    }
  }
</script>

</body>
</html>
